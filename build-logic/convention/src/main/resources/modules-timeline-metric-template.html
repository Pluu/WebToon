<!DOCTYPE html>
<html lang="en">
<head>
    <title>%root-project-name% Build Analytics Report</title>
    <script src="res/d3.js" type="text/javascript"></script>
    <script src="res/timeline.js" type="text/javascript"></script>
    <link href="res/styles.css" rel="stylesheet">
    <link href="res/plugin-logo.png" rel="icon">
    <script src="res/functions.js" type="text/javascript"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
<div id="container">
    <!-- https://github.com/janbarari/gradle-analytics-plugin -->
    <h2>Modules Execution Timeline</h2>
    <div id="modules-timeline-graph" class="modules-timeline-graph"></div>
    <script type="text/javascript">
        var data = %timelines%;

        // create a tooltip
        var tooltip = d3.select("#container")
          .append("div")
          .style('position','absolute')
          .style("opacity", 0)
          .attr("class", "tooltip")
          .style("background-color", "white")
          .style("border", "solid")
          .style("border-width", "2px")
          .style("border-radius", "5px")
          .style("padding", "5px")

        var chart = d3.timeline()
          .stack()
          .margin({left:180, right:0, top:0, bottom:0})
          .mouseover((d, index) => {
             tooltip
               .html(d["tooltip_label"])
               .style("opacity", 1)
          })
          .mouseout((d, index) => {
           tooltip.style("opacity", 0)
          })
          .hover((d, index) => {
             tooltip
               .style("left", d3.event.pageX + "px")
               .style("top", (d3.event.pageY - 50) + "px")
           })

          function load() {
            d3.select("#modules-timeline-graph")
              .append("svg")
              .attr("width", 1200)
              .datum(data)
              .call(chart);
          }

          load();
    </script>
    <div class="space"></div>
</div>
</body>
</html>